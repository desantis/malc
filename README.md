# malc

mal (Make A Lisp) compiler

## Overview

[mal](https://github.com/kanaka/mal) is Clojure inspired Lisp language invented
by Joel Martin as a learning tool.  It has interpreter implementations in dozens
of programming languages, including self-hosted interpreter written in mal
itself.

malc is a compiler for mal, written in mal itself.  It compiles a mal program to
[LLVM assembly language (IR)](http://llvm.org/docs/LangRef.html), and then uses
the LLVM optimizer, assembler and gcc linker to produce a binary executable.

## Installation

malc depends on LLVM, of course. Moreover, the executables generated by malc
are dynamically linked with the Boehm Garbage Collection shared library
(`libgc.so`).

To install the dependencies on Debian/Ubuntu:

    sudo apt-get install llvm libgc-dev

To install the dependencies on RedHat/CentOS:

    sudo yum install llvm gc-devel

Besides these dependencies, malc needs a working mal interpreter; malc comes
bundled with the Ruby implementation of the mal interpreter to ease the usage.
A working Ruby runtime is also required.

## Usage

Run the `malc` wrapper script with the mal program file as the argument:

    ./malc myprogram.mal

If successful, this will generate the executable `myprogram`.

## Running tests

The functional tests for malc are in files under the `tests/` directory.

To run all the tests:

    ./runtests.sh

To run a specific test file:

    ./runtests.sh tests/integer_compare.mal

## Implementation details

See [internals documentation](doc/internals.md).

## License

malc (make-a-lisp compiler) is licensed under the MPL 2.0 (Mozilla Public
License 2.0). See LICENSE.txt for more details.
